syntax = "proto3";

option java_package = "com.soulfiremc.grpc.generated";
option java_multiple_files = true;

package soulfire.v1;

import "soulfire/common.proto";
import "google/protobuf/timestamp.proto";
import "google/protobuf/struct.proto";

message BotConfig {
  repeated SettingsNamespace settings = 1;
}

message BotInfoRequest {
  string instance_id = 1;
  string bot_id = 2;
}

message BotLiveState {
  double x = 1;
  double y = 2;
  double z = 3;
  float xRot = 4;
  float yRot = 5;
}

message BotInfoResponse {
  BotConfig config = 1;
  optional BotLiveState live_state = 2;
}

message BotUpdateConfigRequest {
  string instance_id = 1;
  string bot_id = 2;
  BotConfig config = 3;
}

message BotUpdateConfigResponse {
}

// Granular config entry update (single key-value)
message BotUpdateConfigEntryRequest {
  string instance_id = 1;
  string bot_id = 2;
  string namespace = 3;
  string key = 4;
  google.protobuf.Value value = 5;
}

message BotUpdateConfigEntryResponse {
}

service BotService {
  rpc GetBotInfo (BotInfoRequest) returns (BotInfoResponse) {}
  // Used only for profile import - sends entire config
  rpc UpdateBotConfig (BotUpdateConfigRequest) returns (BotUpdateConfigResponse) {}
  // Granular update for individual config entries
  rpc UpdateBotConfigEntry (BotUpdateConfigEntryRequest) returns (BotUpdateConfigEntryResponse) {}
}
